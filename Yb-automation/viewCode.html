<!DOCTYPE html>
<html>
<head>
    <title>Extract testName</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <script>
        // Function to get query parameters
        function getQueryParams(url) {
            let queryParams = {};
            let anchor = document.createElement('a');
            anchor.href = url;
            let queryStrings = anchor.search.substring(1);
            let params = queryStrings.split('&');

            for (var i = 0; i < params.length; i++) {
                var pair = params[i].split('=');
                queryParams[pair[0]] = decodeURIComponent(pair[1]);
            }

            return queryParams;
        }

        // Extract testName from the URL
        let params = getQueryParams(window.location.href);
        let testName = params.testName || "tests/publishing/ui_tests/test_text_assets.py";

        // Log testName to the console
        console.log(testName);

        // Send a POST request to the specified URL
        axios.post('https://zyw4xz6b5m2c7mdbhhsoerydve0mgnfl.lambda-url.us-west-2.on.aws/', {
            filePath: testName,
            requestType: 'FETCH_FILE_CONTENTS',
            branchName: 'main'
        })
        .then(function (response) {
            // Log the response to the console
            console.log(response);
        })
        .catch(function (error) {
            console.log(error);
        });
    </script>
</body>
</html>
