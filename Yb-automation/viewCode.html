<!DOCTYPE html>
<html>
<head>
    <title>Execute Code</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
    <pre class="line-numbers"><code id="code" class="language-python"></code></pre>
    <div id="userRequestContainer" class="fixed bottom-0 left-0 right-0 z-50 bg-gray-100 border-t border-gray-300 p-0.75 shadow-md">
        <div class="relative flex items-center border rounded-lg shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-indigo-600">
            <textarea name="userRequestInputBox" id="userRequestInputBox" class="block w-full resize-none border-none bg-transparent text-base sm:text-sm sm:leading-6 placeholder:text-gray-400 focus:ring-0 rounded-l-lg p-2" placeholder="Enter your request here..." oninput="autoResizeTextarea(this)" style="height: 2.5rem;"></textarea>
            <button type="button" id="executePythonCodeButton" class="inline-flex items-center rounded-r-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
                </svg>
            </button>
        </div>
    </div>

    <script>
        // Function to auto resize the textarea
        function autoResizeTextarea(textarea) {
            // Logic to resize textarea
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        // Function to send POST request
        function executeCode() {
            const userRequestInputBox = document.getElementById('userRequestInputBox');
            const filePath = userRequestInputBox.value; // Assuming the value is the testName

            axios.post('https://xmichysgq4emm6orafcdnwwhwu0lvmez.lambda-url.us-west-2.on.aws/', {
                filePath: filePath
            })
            .then(function (response) {
                console.log(response.data);
            })
            .catch(function (error) {
                console.error('Error executing code:', error);
            });
        }

        // Add event listener to the "Execute Code" button
        document.getElementById('executePythonCodeButton').addEventListener('click', executeCode);
    </script>
</body>
</html>
