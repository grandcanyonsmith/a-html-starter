<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bema's Recipes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background-color: #f4f4f4;
    }

    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }

    .recipe {
      background: #fff;
      border-radius: 6px;
      margin-bottom: 2rem;
      padding: 1rem 2rem;
      box-shadow: 0 2px 3px rgba(0,0,0,0.1);
    }

    .recipe h2 {
      color: #333;
      margin-top: 0;
    }

    .recipe .variations {
      font-style: italic;
      margin-bottom: 0.5rem;
      color: #666;
    }

    .ingredients-title {
      font-weight: bold;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }

    .ingredients-list {
      margin-bottom: 1rem;
    }

    .instructions {
      white-space: pre-line; /* Preserve line breaks if needed */
    }
  </style>
</head>
<body>
  <h1>Bema's Recipes</h1>
  <div id="recipe-container"></div>

  <script>
    // Fetch the JSON file containing all the recipes
    fetch('ingredients.json')
      .then(response => response.json())
      .then(data => {
        // 'data' is the entire JSON object
        const recipeContainer = document.getElementById('recipe-container');

        // Loop through each top-level recipe name
        Object.keys(data).forEach(recipeName => {
          const recipe = data[recipeName];

          // Create a container for each recipe
          const recipeDiv = document.createElement('div');
          recipeDiv.classList.add('recipe');

          // Recipe Title
          const title = document.createElement('h2');
          title.textContent = recipeName;
          recipeDiv.appendChild(title);

          // If there are variations, display them
          if (recipe.variations) {
            const variationsPara = document.createElement('p');
            variationsPara.classList.add('variations');
            variationsPara.textContent = `Variations: ${recipe.variations.join(', ')}`;
            recipeDiv.appendChild(variationsPara);
          }

          // If there's a 'yield' or 'serves' key, display that
          if (recipe.yield) {
            const yieldPara = document.createElement('p');
            yieldPara.textContent = `Yield: ${recipe.yield}`;
            recipeDiv.appendChild(yieldPara);
          } else if (recipe.serves) {
            const servesPara = document.createElement('p');
            servesPara.textContent = `Serves: ${recipe.serves}`;
            recipeDiv.appendChild(servesPara);
          }

          // Ingredients
          // Some recipes use sub-objects for ingredients (e.g. "ingredients_for_sautÃ©")
          // We'll handle the common pattern "ingredients": { ... }
          // and also loop if any other ingredient objects exist.

          // Helper function to render an ingredients object
          function renderIngredients(ingredientObj, headerText) {
            const ingredientsTitle = document.createElement('div');
            ingredientsTitle.classList.add('ingredients-title');
            ingredientsTitle.textContent = headerText;
            recipeDiv.appendChild(ingredientsTitle);

            const ul = document.createElement('ul');
            ul.classList.add('ingredients-list');

            Object.entries(ingredientObj).forEach(([key, value]) => {
              const li = document.createElement('li');
              li.innerHTML = `<strong>${key}:</strong> ${value}`;
              ul.appendChild(li);
            });

            recipeDiv.appendChild(ul);
          }

          // Primary "ingredients" block
          if (recipe.ingredients) {
            renderIngredients(recipe.ingredients, 'Ingredients');
          }

          // Check for any other sub-ingredient objects (like sauce_ingredients, etc.)
          // We'll exclude 'instructions', 'frosting', 'yield', 'serves', 'variations' keys
          Object.keys(recipe).forEach(key => {
            if (
              key.toLowerCase().includes('ingredient') &&
              key !== 'ingredients'
            ) {
              renderIngredients(recipe[key], key.replaceAll('_', ' '));
            }
          });

          // If there's a "frosting" key, treat it as another ingredient set
          if (recipe.frosting) {
            renderIngredients(recipe.frosting, 'Frosting');
          }

          // Instructions (may be a string or there could be multiple blocks)
          if (recipe.instructions) {
            const instructionsPara = document.createElement('p');
            instructionsPara.classList.add('instructions');
            instructionsPara.textContent = recipe.instructions;
            recipeDiv.appendChild(instructionsPara);
          }

          // Finally, add the recipe block to the page
          recipeContainer.appendChild(recipeDiv);
        });
      })
      .catch(error => {
        console.error('Error loading recipes:', error);
      });
  </script>
</body>
</html>