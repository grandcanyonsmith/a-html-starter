<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"></script>
</head>
<body>
    <div class="p-10">
        <div class="max-w-md mx-auto bg-white p-5 rounded-md shadow-sm">
            <h2 class="text-2xl font-bold mb-5 text-gray-800">Login</h2>
            <input id="email" type="email" placeholder="Email" class="mb-4 w-full px-3 py-2 border border-gray-300 rounded-md">
            <input id="password" type="password" placeholder="Password" class="mb-4 w-full px-3 py-2 border border-gray-300 rounded-md">
            <button id="submit" class="w-full px-3 py-2 bg-blue-600 text-white rounded-md" disabled>Submit</button>
            <p id="error" class="mt-3 text-red-600"></p>
            <p class="mt-3 text-blue-600 cursor-pointer" onclick="window.location.href='signup.html'">Not a member? Click here to sign up</p>
        </div>
    </div>

    <script>
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const submitButton = document.getElementById('submit');
        const errorParagraph = document.getElementById('error');

        emailInput.addEventListener('input', validateForm);
        passwordInput.addEventListener('input', validateForm);

        function validateForm() {
            submitButton.disabled = !emailInput.value || !passwordInput.value;
        }

        submitButton.addEventListener('click', async () => {
            try {
                const response = await axios.post('https://birtn6fkxczvtksmiusfpagcb40zhdrb.lambda-url.us-west-2.on.aws/', {
                    email: emailInput.value,
                    password: passwordInput.value,
                    requestType: 'LOGIN'
                });



                if (response.data.statusCode === 400) {
                    alert(JSON.stringify(response.data));
                    errorParagraph.textContent = response.data.body;
                } else {
                    alert(JSON.stringify(response.data));
                    console.log(response.data,'response data');
                    console.log(response.data.uId,'uId');
                    window.location.href = `view-all-projects-with-nav.html?uId=${response.data.uId}`;
                }
            } catch (error) {
                errorParagraph.textContent = 'An error occurred!';
            }
        });
    </script>
</body>
</html>
